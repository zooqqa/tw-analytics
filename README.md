# TW Buy Stat - MVP –°–∫–≤–æ–∑–Ω–æ–π –ê–Ω–∞–ª–∏—Ç–∏–∫–∏

–°–µ—Ä–≤–∏—Å –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ TrafficWave (—Ç—Ä–µ–∫–µ—Ä) –∏ Moloco (—Ä–µ–∫–ª–∞–º–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫).

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Windows (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±)
```bash
# –ó–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
scripts\setup.bat

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–ø–æ–º–µ—Å—Ç–∏—Ç–µ tw.csv –∏ moloco.csv –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)
scripts\load_data.bat

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
scripts\run_dev.bat
```

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv .venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
# Windows:
.venv\Scripts\activate
# Linux/macOS:
source .venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
python -c "from src.db.setup import ensure_schema; ensure_schema()"

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
python -m src.main --tw tw.csv --moloco moloco.csv

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
uvicorn src.api.main:app --host 0.0.0.0 --port 8000 --reload
```

### –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```
http://127.0.0.1:8000/
```

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìä –î–≤–µ —Ç–∞–±–ª–∏—Ü—ã
- **–ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): –∫–∞–º–ø–∞–Ω–∏–∏ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ—Ñ—Ñ–µ—Ä–∞–º–∏
- **–ü–ª–æ—Å–∫–∞—è**: –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –≤ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ

### üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è: "—Å–æ–¥–µ—Ä–∂–∏—Ç" / "–Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç"
- –ß–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è: "–±–æ–ª—å—à–µ" / "–º–µ–Ω—å—à–µ" (ROI, Profit, Spend)
- –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç
- –§–∏–ª—å—Ç—Ä –ø–æ –≥–µ–æ
- **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**: –º–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —Å–∫—Ä—ã—Ç—ã–º –∫–æ–ª–æ–Ω–∫–∞–º

### üìà –î–∞–Ω–Ω—ã–µ
- –í—Å–µ –ø–æ–ª—è –∏–∑ TrafficWave —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `tw_`
- –í—Å–µ –ø–æ–ª—è –∏–∑ Moloco —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `m_`
- –†–∞—Å—á—ë—Ç–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏: `profit`, `roi_pct`, `calculated_spend`, `calculated_cpi`
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ª—é–±–æ–π –∫–æ–ª–æ–Ω–∫–µ
- –í—ã–±–æ—Ä –≤–∏–¥–∏–º—ã—Ö –∫–æ–ª–æ–Ω–æ–∫

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
tw_buy_stat/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/main.py          # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ db/                  # –ú–æ–¥–µ–ª–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ ingestion/           # –ó–∞–≥—Ä—É–∑—á–∏–∫–∏ CSV
‚îÇ   ‚îú‚îÄ‚îÄ services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ main.py              # CLI
‚îú‚îÄ‚îÄ templates/index.html     # UI
‚îú‚îÄ‚îÄ docs/                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ tw.csv                   # –î–∞–Ω–Ω—ã–µ TW (–ø—Ä–∏–º–µ—Ä)
‚îú‚îÄ‚îÄ moloco.csv              # –î–∞–Ω–Ω—ã–µ Moloco (–ø—Ä–∏–º–µ—Ä)
‚îî‚îÄ‚îÄ requirements.txt
```

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Python 3.11+, FastAPI, SQLAlchemy, Pandas
- **Frontend**: Vanilla JS, HTML, CSS (dark theme)
- **–ë–î**: SQLite (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞) / PostgreSQL (–ø—Ä–æ–¥–∞–∫—à–Ω)
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `docs/idea.md` - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–¥–µ—è –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- `docs/mvp_plan.md` - –ø–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ MVP
- `docs/features_plan.md` - –ø–ª–∞–Ω –±—É–¥—É—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
- `docs/requirements.md` - —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ
- `docs/architecture.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è
- `info.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–°–º. `docs/features_plan.md` (–≠—Ç–∞–ø 0):
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- UI –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–≥—Ä—É–∑–æ–∫
- –ü—Ä–µ—Å–µ—Ç—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- –¢–µ—Å—Ç—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ UI

## üìù API Endpoints

- `GET /` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `GET /table` - –ø–ª–æ—Å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞
- `GET /table/hierarchical` - –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞
- `GET /stats` - –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /loads` - –∏—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∑–æ–∫

## üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- `data_loads` - –∏—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∑–æ–∫
- `tw_events` - —Å–æ–±—ã—Ç–∏—è –∏–∑ TrafficWave
- `moloco_events` - —Å–æ–±—ã—Ç–∏—è –∏–∑ Moloco
- `campaign_statistics` - –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–∞—è –≤–∏—Ç—Ä–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ MVP

- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ CSV —á–µ—Ä–µ–∑ CLI
- ‚úÖ –í—Å–µ –ø–æ–ª—è –∏–∑ –æ–±–æ–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏
- ‚úÖ –†–∞—Å—á—ë—Ç–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –µ–¥–∏–Ω—ã–º —Ñ–æ—Ä–º—É–ª–∞–º
- ‚úÖ –î–≤–µ —Ç–∞–±–ª–∏—Ü—ã (–ø–ª–æ—Å–∫–∞—è + –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º
- ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –∫–æ–ª–æ–Ω–æ–∫
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–ª–æ–Ω–∫–∞–º
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∑–æ–∫ –≤ –ë–î

